# 第一关

## 分析与设计

* 本关的任务是编写一个词法分析程序，它能对输入的一行**字符流**进行**词法分析**，依次识别出其中的**关系运算符和其他符号**，并输出对应的**记号序列**
* 在读入的时候使用`getchar()`,根据当前读到的是否为换行符来判断读取是否结束
* 根据状态转换图逐条进行条件判断，模拟状态机的执行。判断遵循一定的顺序，先判断长度为2的符号，如`>=``<=``<>`,再判断长度为1的符号串`>``<``=`,这是因为长度为2的符号的第一个字符会影响长度为1的符号的判断。其余符号（除了换行符）之外都被视为`other`串,并设置一个指针来记录当前串的开始位置,当匹配到一个`other`串时用以计算出其长度
* 当读到这些符号时,其前面的部分被视为`other`串,当前的符号被视为`relop`串,并保存在一个结构体`vector`中
* 最后将`vector`中的内容按照顺序输出即可

## 遇到的问题

* 刚开始未仔细考虑转换图中`<>`和`><`的情况，后来通过询问助教以及看老师的PPT发现转换图对这两种情况有各自的处理，将`<>`视为不等号,`><`可直接先把`>`提取出来,后面的再递归分析即可
* `other`串的长度至少为1,上述判断的逻辑可能会出现`other`串长度为0的情况(如:有连续两个长度为1的符号),这种情况需要舍弃
* 需要在`CMakeList-1.txt`中设置`CMake`版本以及文件名称、路径,刚开始自己设置的`CMake`的版本过高导致无法通过编译
* 需要在对应的`doc`文件中建立要求的文件才能通过平台的编译,否则会报错缺少相应的文件
* 函数的跨平台问题。`itoa()`函数是Windows系统特有的函数。Linux内核中只有`atoi()`函数，被包含在`stdlib.h`头文件中，而没有`itoa()`函数。`itoa()`函数的功能可以用`sprintf()`函数代替.这也是第二关示例中的`expr.lex`中可以使用`atol()`函数的原因
* 不同系统的行尾不同,Windows系统是`\n\r`,而Linux系统是`\n`，所以在判断是否结束读取时需要综合考虑两种情况