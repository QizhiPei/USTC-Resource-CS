# 第二关

## 分析与设计

* 根据`Flex`的规则,编写词法规范文件
* 用`[^\n\r<>=]`来匹配`other`串,用`">"`来匹配`>`,其余`relop`符类似
* 利用宏`LEXERGEN`来选择用手工编写的词法分析函数，还是由`Flex`生成的词法分析函数。当定义了宏`LEXERGEN`时,则调用`Flex`生成的`lex.yy.c`里的`getsym`函数,若未定义则使用第一关的函数

## 遇到的问题

* C与C++特性的不同.在头文件中定义共用的变量时,C只需要像示例中那样在头文件中定义变量、声明函数,在其他`.c`文件中便可以直接使用.而在C++中,最好的做法是在`.c`文件中定义变量,而在头文件中进行`extern`,以标示变量的定义在别的文件中，提示编译器遇到此变量时在其他模块中寻找其定义
* 之前对宏理解很肤潜，通过这一关自己对宏、条件编译有了更深刻的理解
* 对正则表达式不是很熟悉,通过学习了解了正则表达式的语法规则
* 开始时对示例中代码的逻辑不是很理解,不知道主函数是如何跳出`while`循环的,后来在提出`issue`后理解了(感谢王章瀚同学的回答).在`lex.yy.c`中会有一个`YY_STATE_EOF`状态来处理读到文件结束符的情况,返回0,所以可以跳出`while`循环
* 在`Makefile`中，每次生成文件前最好执行一次`clean`操作，否则可能会出现奇怪的bug（`make`可能会自动省略一些中间过程）
* `\`和`/`要区分开来，前者是换行符的一部分，后者一般用来表示路径,且Windows系统和Linux系统表示文件路径分别使用的是`\`和`/`，在网页的URL中一般使用类似Linux的路径表示`/`

